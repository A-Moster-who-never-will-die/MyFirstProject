<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>欢迎新用户</title>
    <link rel="stylesheet" href="/css/register.css">
    <script src="/js/jquery-3.5.1.min.js"></script>

</head>
<body>

<form id="form" action="/login/register" method="post">
    <table id="register">
        <caption id="caption">注册</caption>
        <tr>
            <th>账户</th><td><input id="name" type="text" name="name"></td><td><img id="nameImg" src="/img/warning.jpg"></td>
        </tr>
        <tr>
            <th>密码</th><td><input id="password" type="password" name="password"></td>
        </tr>
        <tr>
            <th>请重复密码</th><td><input id="repeat" type="password"></td><td><img id="repeatimg" src=""></td>
        </tr>

    </table>
    <input id="submit" value="提交" type="submit">
</form>
<script>
    var sumbit=document.getElementById("submit");
    sumbit.onmouseover=function(){
        var nameImg=document.getElementById("nameImg")
        var name=document.getElementById("name").value;
        $.ajax({
            url:"/login/hasSame",
            type:"GET",
            dataType:"json",
            data:{"name":name},
            success:function (data) {
                if(data<5){
                    nameImg.src="";
                }else {
                    alert("账号重复")
                    nameImg.src="/img/warning.jpg";
                }
            }
        });

}
</script>
<script src ="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script language="JavaScript" >
    var repeat =document.getElementById("repeat");
    repeat.onblur=function(){
        var password=document.getElementById("password").value;
        var repeat=document.getElementById("repeat").value;
        var repeatimg= document.getElementById("repeatimg");
        if(repeat!=password){
            repeatimg.src="/img/warning.jpg";
        }else {
            repeatimg.src="";
        }
    }
</script>

</body>
</html>